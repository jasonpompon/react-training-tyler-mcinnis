<!DOCTYPE html>
<html>
<head>
  <title>First React App</title>
  <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  <script src='https://unpkg.com/babel-standalone@6/babel.min.js'></script>
</head>
<body>
    <div id='app'></div>
    <script type='text/babel'>

    function FriendsList (props) {
        return (
            <div>
                <h1>Active Friends</h1>
                <ul>
                    {props.list.map((name) => (
                        <li key={name}>
                            <span>{name}</span>
                            <button onClick={() => props.onRemoveFriend(name)}>Remove</button>
                            <button onClick={() => props.onDeactivate(name)}>Deactivate</button>
                        </li>
                    ))}
                </ul>
                <h1>Deactive Friends</h1>
                <ul>
                    {props.dList.map((name) => (
                        <li key={name}>
                            <span>{name}</span>
                            <button onClick={() => props.onActivate(name)}>Activate</button>
                        </li>
                    ))}
                </ul>
            </div>
        )
    }

    class App extends React.Component {
        constructor(props) {
            super(props)

            this.state = {
                friends: ['Jason', 'Tom', 'Paul'],
                dFriends: ['Elodie'],
                input: '',
            }

            this.handleRemoveFriend = this.handleRemoveFriend.bind(this)
            this.updateInput = this.updateInput.bind(this)
            this.handleAddFriend = this.handleAddFriend.bind(this)
            this.handleClear = this.handleClear.bind(this)
            this.handleDeactivate = this.handleDeactivate.bind(this)
            this.handleActivate = this.handleActivate.bind(this)
        }

        handleAddFriend() {
            this.setState((currentState) => {
                return {
                    friends: currentState.friends.concat([currentState.input]),
                    input: '',
                }
            })
        }

        handleRemoveFriend(name) {
            this.setState((currentState) => {
                return {
                    friends: currentState.friends.filter((friend) => friend !== name)
                }
            })
        }

        updateInput(e) {
            const value = e.target.value

            this.setState({
                input: value
            })
        }

        handleClear() {
            this.setState({
                friends: [],
                dFriends: [],
            })
        }

        handleActivate(name) {
            this.setState((currentState) => {
                return {
                    dFriends: currentState.dFriends.filter((friend) => friend !== name),
                    friends: currentState.friends.concat([name])
                }
            })
        }

        handleDeactivate(name) {
            this.setState((currentState) => {
                return {
                    friends: currentState.friends.filter((friend) => friend !== name),
                    dFriends: currentState.dFriends.concat([name])
                }
            })
        }

        render() {
            return (
                <div>
                    <input
                        type='text'
                        placeholder='new friend'
                        value={this.state.input}
                        onChange={this.updateInput}
                    />
                    <button onClick={this.handleAddFriend}>Submit</button>
                    <div><button onClick={this.handleClear}>Clear all</button></div>
                    <FriendsList 
                        list={this.state.friends}
                        dList={this.state.dFriends} 
                        onRemoveFriend={this.handleRemoveFriend}
                        onDeactivate={this.handleDeactivate}
                        onActivate={this.handleActivate}
                    />
                </div>
            )
        }
    }
   
   
    ReactDOM.render(
      <App />,
      document.getElementById('app')
    )
  </script>
</body>
</html>